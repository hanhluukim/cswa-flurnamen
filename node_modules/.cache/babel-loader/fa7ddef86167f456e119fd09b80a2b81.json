{"ast":null,"code":"import axios from \"axios\"; //Infornation von APIs\n\nconst token = \"cmVzdGFwaS1yZWFkOmRlMjgxMjMyOGIzYTZmODc1NDIyYjM4NzZlMDJiZTM3\";\nconst authHeader = {\n  'Authorization': `Basic ${token}`\n};\nconst API_URL = 'https://collections.thulb.uni-jena.de/api/v1';\nconst keys = ['title', 'area', 'evidence', 'note', 'parent'];\n/*\nAus der Daten werden nur folgende Funktionen eines Ergebnises gespeichert.\n*/\n\nconst getResultsList = data => {\n  const foundObjects = [];\n\n  for (var i = 0; i < data.length; i++) {\n    var new_data = {\n      'id': data[i]['id'],\n      'title': data[i]['title'][0],\n      'place': data[i]['place'][0],\n      'gnd': data[i]['gnd'],\n      'link': data[i]['link'],\n      'facetObjectType': data[i]['facetObjectType'],\n      \"search_result_link_text\": data[i][\"search_result_link_text\"],\n      'ArchFile_class_001_Label': data[i]['ArchFile_class_001_Label'][1]\n    };\n    foundObjects.push(new_data);\n  }\n\n  return foundObjects;\n};\n/*\nFunktion zum Aufrufen der Daten mit dem gegebenen Title.\nReturn bereits in JSON\nErgebnisse für gesuchten Title werden an Search Komponent gesendet\n*/\n\n\nconst searchInfoQuery = title => {\n  var req = API_URL + '/search?wt=json&q=+cbuUnitTypes.actual:(33.0 33.1) AND objectType:\"cbu\" AND title:' + title;\n  return axios.get(req, {\n    headers: authHeader\n  }).then(response => {\n    const data = response.data.response.docs; //docs is a list\n\n    const resp_in_list = getResultsList(data);\n    return resp_in_list;\n  });\n};\n/*\n- Eine Gemarkung hat eine Sammlung von untergeordneten Flurnamen als children\n- Es gibt eine Liste der children der Gemarkung\n- Für jedes Element (flurname) wird ein GET-Request mit ID gesendet\n- Nur einige Merkmale wurden gespeichert\n*/\n\n\nconst getChilden = childList => {\n  var childInfos = [];\n\n  for (var i in childList.slice(0, 10)) {\n    var childID = childList[i].$[\"xlink:title\"];\n    console.log(childID);\n    /*\n    Daten eines Flurnamen aufrufen mit der gegebenen childID\n    */\n\n    var childReq = API_URL + '/objects/' + childID;\n    var childRes = axios.get(childReq, {\n      headers: authHeader\n    }).then(response => {\n      var xml2js = require('react-native-xml2js');\n\n      var parser = new xml2js.Parser();\n      var dataJS = '';\n      parser.parseString(response.data, function (err, detailJSON) {\n        dataJS = detailJSON.mycoreobject;\n      });\n      console.log(\"CHILDREN INFORMATION\");\n      console.log(dataJS);\n      var info = {\n        'id': childID,\n        'area': dataJS.metadata[0][\"def.area\"][0].area[0]._,\n        'evidence': dataJS.metadata[0][\"def.evidence\"][0].evidence[0]._,\n        //'note':dataJS.metadata[0][\"def.note\"][0].note[0]._,\n        'place': dataJS.metadata[0][\"def.place\"][0].place[0]._,\n        'typeTitle': dataJS.metadata[0][\"def.title\"][0].title[0].$.type,\n        'title': dataJS.metadata[0][\"def.title\"][0].title[0]._\n      };\n      return info;\n    });\n    console.log(childRes);\n    childInfos.push(childRes);\n  }\n\n  console.log(childInfos);\n  return childInfos;\n};\n/*\nresponse von einer Gemarkung beinhaltet mehrere children\ninformation von children wird mit der funktion getChildren gefunden und gespeichert\n*/\n\n\nconst contentDetailGemarkung = dataJS => {\n  var content = {\n    'title': dataJS.metadata[0][\"def.title\"][0].title[0][\"_\"],\n    'coordinate': [dataJS.metadata[0][\"def.coordinates\"][0].coordinates[0]._, dataJS.metadata[0][\"def.coordinates\"][0].coordinates[1]._, dataJS.metadata[0][\"def.coordinates\"][0].coordinates[2]._, dataJS.metadata[0][\"def.coordinates\"][0].coordinates[3]._],\n    'gnd': dataJS.metadata[0][\"def.place\"][0].place[0]._,\n    'children': getChilden(dataJS.structure[0].children[0].child)\n  };\n  console.log(content);\n  return content;\n};\n/*\nInformationen eines Flurnamen wird gefiltert und gespeichert\n\n*/\n\n\nconst contentDetailFlurname = dataJS => {\n  const content = \"\";\n  return content;\n};\n\nconst getInfoDetails = objectID => {\n  var req = API_URL + '/objects/' + objectID;\n  return axios.get(req, {\n    headers: authHeader\n  }).then(response => {\n    var xml2js = require('react-native-xml2js');\n\n    var parser = new xml2js.Parser();\n    var dataJS = '';\n    parser.parseString(response.data, function (err, detailJSON) {\n      dataJS = detailJSON.mycoreobject;\n    });\n    console.log(\"ALL KEYS\");\n    console.log(dataJS);\n    console.log(Object.keys(dataJS.structure));\n    console.log(dataJS.structure['0']);\n    var keys = Object.keys(dataJS.structure['0']);\n\n    if (keys.includes('children')) {\n      //var contentG = contentDetailGemarkung(dataJS);\n      return 'Gemarkung';\n    } else {\n      //Flurname\n      var contentF = \"Flurname\"; //contentDetailFlurname(dataJS);\n\n      return contentF;\n    } //console.log(dataJS);\n    //var content = contentDetails(dataJS)\n\n  });\n};\n\nexport default {\n  searchInfoQuery,\n  getInfoDetails\n};","map":{"version":3,"sources":["/home/miss-luu/Downloads/0_Studium/0_web_client/cswa-flurnamen/react-flurnamen/src/components/apis/get.service.js"],"names":["axios","token","authHeader","API_URL","keys","getResultsList","data","foundObjects","i","length","new_data","push","searchInfoQuery","title","req","get","headers","then","response","docs","resp_in_list","getChilden","childList","childInfos","slice","childID","$","console","log","childReq","childRes","xml2js","require","parser","Parser","dataJS","parseString","err","detailJSON","mycoreobject","info","metadata","area","_","evidence","place","type","contentDetailGemarkung","content","coordinates","structure","children","child","contentDetailFlurname","getInfoDetails","objectID","Object","includes","contentF"],"mappings":"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","sourcesContent":["import axios from \"axios\";\n\n//Infornation von APIs\nconst token=\"cmVzdGFwaS1yZWFkOmRlMjgxMjMyOGIzYTZmODc1NDIyYjM4NzZlMDJiZTM3\"\nconst authHeader={'Authorization': `Basic ${token}`}\nconst API_URL='https://collections.thulb.uni-jena.de/api/v1'\n\n\nconst keys=[\n  'title',\n  'area',\n  'evidence',\n  'note',\n  'parent'\n]\n/*\nAus der Daten werden nur folgende Funktionen eines Ergebnises gespeichert.\n*/\nconst getResultsList = (data)=>{\n  const foundObjects=[]\n  for (var i = 0; i < data.length; i++)\n        {\n            var new_data={\n                'id':data[i]['id'],\n                'title':data[i]['title'][0],\n                'place':data[i]['place'][0],\n                'gnd':data[i]['gnd'],\n                'link':data[i]['link'],\n                'facetObjectType':data[i]['facetObjectType'],\n                \"search_result_link_text\":data[i][\"search_result_link_text\"],\n                'ArchFile_class_001_Label':data[i]['ArchFile_class_001_Label'][1],\n                \n            }\n            foundObjects.push(new_data)\n        }\n    return foundObjects\n};\n\n\n/*\nFunktion zum Aufrufen der Daten mit dem gegebenen Title.\nReturn bereits in JSON\nErgebnisse für gesuchten Title werden an Search Komponent gesendet\n*/\nconst searchInfoQuery  = (title) => {\n      var req = API_URL+ '/search?wt=json&q=+cbuUnitTypes.actual:(33.0 33.1) AND objectType:\"cbu\" AND title:'+title;\n      return axios.get(req, {headers:authHeader}).then((response)=>{\n        \n          const data = response.data.response.docs; //docs is a list\n          const resp_in_list= getResultsList(data);\n          return resp_in_list;\n      });      \n};\n\n/*\n- Eine Gemarkung hat eine Sammlung von untergeordneten Flurnamen als children\n- Es gibt eine Liste der children der Gemarkung\n- Für jedes Element (flurname) wird ein GET-Request mit ID gesendet\n- Nur einige Merkmale wurden gespeichert\n*/\nconst getChilden=(childList)=>{\n  var childInfos=[]\n  for(var i in childList.slice(0,10)){\n      var childID = childList[i].$[\"xlink:title\"];\n      console.log(childID);\n      /*\n      Daten eines Flurnamen aufrufen mit der gegebenen childID\n      */\n      var childReq = API_URL+'/objects/'+childID;\n      var childRes= axios.get(childReq, {headers:authHeader}).then((response)=>{\n        var xml2js = require('react-native-xml2js');\n        var parser = new xml2js.Parser();\n        var dataJS='';\n        parser.parseString(response.data, function (err, detailJSON) {\n            dataJS = detailJSON.mycoreobject;\n        });\n        console.log(\"CHILDREN INFORMATION\");\n        console.log(dataJS);\n        var info={\n          'id':childID,\n          'area':dataJS.metadata[0][\"def.area\"][0].area[0]._,\n          'evidence':dataJS.metadata[0][\"def.evidence\"][0].evidence[0]._,\n          //'note':dataJS.metadata[0][\"def.note\"][0].note[0]._,\n          'place':dataJS.metadata[0][\"def.place\"][0].place[0]._,\n          'typeTitle':dataJS.metadata[0][\"def.title\"][0].title[0].$.type,\n          'title':dataJS.metadata[0][\"def.title\"][0].title[0]._,\n\n        }\n        return info\n      });\n      console.log(childRes);\n      childInfos.push(childRes);\n  }\n  console.log(childInfos)\n  return childInfos\n}\n\n/*\nresponse von einer Gemarkung beinhaltet mehrere children\ninformation von children wird mit der funktion getChildren gefunden und gespeichert\n*/\nconst contentDetailGemarkung=(dataJS)=>{\n  var content={\n      'title':dataJS.metadata[0][\"def.title\"][0].title[0][\"_\"],\n      'coordinate':[\n                    dataJS.metadata[0][\"def.coordinates\"][0].coordinates[0]._,\n                    dataJS.metadata[0][\"def.coordinates\"][0].coordinates[1]._,\n                    dataJS.metadata[0][\"def.coordinates\"][0].coordinates[2]._,\n                    dataJS.metadata[0][\"def.coordinates\"][0].coordinates[3]._\n                  ],\n      'gnd':dataJS.metadata[0][\"def.place\"][0].place[0]._,\n      'children': getChilden(dataJS.structure[0].children[0].child),\n  }\n  console.log(content);\n  return content;\n};\n\n/*\nInformationen eines Flurnamen wird gefiltert und gespeichert\n\n*/\nconst contentDetailFlurname=(dataJS)=>{\n  const content=\"\";\n  return content;\n};\n\nconst getInfoDetails = (objectID) => {\n  var req = API_URL+'/objects/'+objectID;\n  return axios.get(req, {headers:authHeader}).then((response)=>{\n        \n        var xml2js = require('react-native-xml2js');\n        var parser = new xml2js.Parser();\n        var dataJS='';\n        parser.parseString(response.data, function (err, detailJSON) {\n            dataJS = detailJSON.mycoreobject;\n        });\n        console.log(\"ALL KEYS\");\n        console.log(dataJS);\n        console.log(Object.keys(dataJS.structure));\n        console.log(dataJS.structure['0']);\n        var keys = Object.keys(dataJS.structure['0']);\n\n        if(keys.includes('children')){\n            //var contentG = contentDetailGemarkung(dataJS);\n            return 'Gemarkung'\n        }\n        else{\n          //Flurname\n            \n            var contentF = \"Flurname\" //contentDetailFlurname(dataJS);\n            return contentF\n        }\n        //console.log(dataJS);\n        //var content = contentDetails(dataJS)\n      \n  });\n};\n\nexport default {\n  searchInfoQuery,\n  getInfoDetails\n};"]},"metadata":{},"sourceType":"module"}